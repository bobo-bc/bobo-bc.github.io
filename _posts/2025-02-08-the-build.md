---
title: The Build
slug: the-build
date_published: 2025-02-08T19:14:09.000Z
date_updated: 2025-06-18T18:23:00.000Z
catagories: [homeLab]
tags: Homelab
---

## Create a VM template

Create a dietpi virtual machine by using this install script run from the proxmox pve shell that was originally published here: 

    curl -sSfL https://raw.githubusercontent.com/dazeb/proxmox-dietpi-installer/main/dietpi-install.sh

### Things to note:

- 8 Gig ram
- 2 core CPU and set the the cpu driver type to "x86-64-v2"
- 16 Gig for Os drive on "local" proxmox storage.


### DietPi-Config

- set timezone
- name call this one "node"
- fix IP to something not needed like 10.0.0.19

### DietPi-Software

- select both docker and docker compose.
- select install and dietpi will install components and update the OS.
- reboot

Lastly add in proxmox for the vms hardware

1. 50 gig Hard Disk (iscsi) on "local" proxmox storage. - to be used for glusterfS later.

2. Then shutdown the VM

3. Right click the vm and convert to template.

The nodes can be created from cloning the template.

## Create the nodes

Right click the template and clone.

- set the name for the node (node1)
- set the VM ID to a high numberer number so all the swarm nodes can be sequential like 150
- set mode to Full clone

After the node has been created log in and enter

    DietPi-Config

Configure each clone change name, fix IP

- node1 10.0.0.21
- node2 10.0.0.22
- node3 10.0.0.23

One final reboot.
